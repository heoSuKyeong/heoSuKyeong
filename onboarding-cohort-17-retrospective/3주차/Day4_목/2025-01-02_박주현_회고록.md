# Daily Retrospective

**작성자**: [박주현]  
**작성일시**: [2025-01-02]

# 1. 오늘 배운 내용

## 1️⃣ ECOUNT 개발 용어

<div style="border-left: 5px solid #4493F8; padding: 10px 15px; margin: 10px 0; border-radius: 5px; background-color: rgba(68, 147, 248, 0.1); font-size: 14px; line-height: 1.5;">
  <p style="font-weight: bold; margin-bottom: 5px;">💡 bizz</p>
  업무를 뜻합니다.

예) 판매, 견적, 구매 등

</div>

<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 menu</p>
  메뉴를 뜻합니다. (어떤 행위라고 생각해 볼 수 있습니다.)

업무를 이용 하기 위한 도구

5.0에서는 중요한 지위를 부여하지 않고자 합니다.

예) 판매입력, 판매조회 등

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 sid</p>
  데이터를 특정 하기 위한 우리만의 Key를 통칭합니다.

데이터 구조를 통일 시키기 위한 목적

예) bizz_sid, menu_sid, record_sid, data_sid, tenant_sid, user_sid 등

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 definition</p>
  명세서

공통 기능이 동작하기 위한 정보일 뿐, definition자체가 기능을 가지지는 않습니다.

예) bizz_definition, menu_definition, data_model_definition 등

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 data_model</p>
데이터 구조를 통일 시키기 위한 목적

데이터 모델의 목적과 각 항목의 관계에 따라 처리하는 방법이 각기 다릅니다.

`개발 용어로 여기서는 같은 목적을 가진 여러 항목의 묶음으로 생각할 수 있습니다.`

예) 재고싱글-입력, 재고싱글-조회, 재고싱글-조회서치 등

저장 시 상단과 하단에서 여러 항목을 고려한 유효성 검사 방법이 다름. 데이터 구조가 상단 1 : 하단 N의 관계로 구성되어 있음.

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 prop</p>
  각 업무의 항목 (data_model의 각 항목)

예) 검색창 내 기준일자, 사용일자, 비용그룹, 비용, 거래처 등

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-tip">
  <p class="callout-title">💡 attribute</p>
  
기획의 구체적인 내용을 개발자들은 일반화하고 추상적인 개념으로 만들어야 합니다. 추상적인 개념이 담지 못하는 서로 다른 구체적인 특징들은 속성 attribute 으로 만들어 관리합니다.
<img src="../ref/박주현 2025-01-02 회고록 이미지2.png"/>
</blockquote>

---

# 2. 동기에게 도움 받은 내용

현철님과 다은님께서 5.0 개념교육에 대한 이해를 할 수 있는 자료와 정보를 제공해주셨습니다. 성철님께서 회식 장소 예약과 메뉴 선정 예약을 모두 도맡아 해주셨습니다. 저흰 가서 숟가락만 들면됩니다. 아연님과 함께 라면을 나눠 먹었습니다. 건호님과 오늘 배운 개념을 서로 상의해보았습니다.

---

# 3. 개발 기술적으로 성장한 점

## 3-2. 오늘 직면했던 문제 (개발 환경, 구현)와 해결 방법

공지사항, 숙제 두 가지 기능이 있습니다.

<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-note">
  <p class="callout-title">📝 공지사항</p>

1. 제목, 내용, 공지기간을 입력하고 조회 할 수 있어야 한다.

2. 공지기간을 반드시 입력해야 한다.

3. 제목을 10글자만 입력 할 수 있다.
</blockquote>

<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-note">
  <p class="callout-title">📝 숙제</p>

1. 제목, 내용, 과목을 입력하고 조회 할 수 있어야 한다.

2. 과목을 반드시 입력해야 한다.

3. 제목을 입력하지 않으면 과목명을 제목으로 자동으로 입력(저장)해 준다.

4. 제목은 20글자까지 입력 할 수 있다.
</blockquote>

### ⭐ 오늘 도전 과제

```
비용아끼고 싶어	화면 따로 개발하고 싶지 않아, 기능도 따로 개발하고 싶지 않아, 테이블도 1개만 있었으면 좋겠다.


위 요구사항을 브라우저 소스도 1개, 웹서버 소스도 1개, 테이블도 1개로 구현하려면 어떤 방법으로 개발 할 수 있을까?
```

### 🤔 저만의 구현 방법

브라우저의 소스를 1개만 쓰기 위해선 API 를 재활용해야합니다.

프론트엔드 소스 코드를 통해 공지사항은 공지사항에 맞게, 17기 숙제는 숙제에 맞게 프로퍼티에 값이 담겨져 웹서버로 요청을 보냅니다.

이때 DTO 는 제목, 내용, 과목, 공지기간, 게시글 타입을 모두 갖는 하나의 공통된 DTO 를 만들어, 각각의 기능에서 재사용이 가능합니다.

공지사항 기능의 경우 DTO 에 과목 필드가 null 로 담겨져 웹서버에 오고, 숙제의 경우 공지 기간 필드가 null 처리 돼서 전달됩니다.

선택적 항목인 제목 또한 null 이 될 수 있습니다. 공지사항은 공지사항 타입을 숙제는 숙제 타입을 기입하여 요청을 보냅니다.

```json
{
  "게시글_제목": "신년공지",
  "게시글_내용": "~~~~~~~~~~~~~~~",
  "게시글_공지기간": "2025-~~~~",
  "게시글_과목": null,
  "게시글_타입": "공지사항"
}
```

웹서버의 소스 코드는 프론트엔드의 API 통신과 상응되는 소스 1개를 가질 수 있습니다. DTO를 매개 변수로 받을테고, 이때 DTO 매개 변수의 타입을 확인하여 조건문 분기처리를 할 수 있습니다.

DTO 의 게시글 타입 필드 값이 공지사항과 일치하다면 공지사항을 밸리데이션 하고 DB 에 저장할 수 있고, 숙제 타입과 같다면 숙제에 대한 밸리데이션을 하고 DB에 저장할 수 있습니다.

인터페이스를 활용한다면 하나의 소스를 두고 각각의 요구사항을 확장하여 구현해 더욱 객체지향적으로 코딩이 가능합니다.

예를 들어 게시글 등록에 대한 액션을 인터페이스로 두고 공지사항 등록액션과 숙제 등록 액션은 이를 상속받을 수 있습니다.

공지사항 등록 액션과 숙제 등록 액션은 각각의 기능에 맞는 요구사항(밸리데이션 등)을 onExecute 를 오버라이드해 구현하여 처리할 수 있습니다. 하지만 위 방법이 소스 코드가 1개라는 제한 점을 만족시키는지는 모르겠습니다. 소스가 1개 라는 점이 API 상응되는 메소드가 한개이고 이 한 소드에 내에서 처리를 해야한다면 인터페이스를 사용하지 않은 위 방식을 사용할 수 있다고 생각합니다.

DTO 를 활용하지 않는다면 Reqeust Body 에 파라미터에 상응되는 메소드의 매개 변수에 쿼리파람을 가질 겁니다. 이때 필수 항목이 아닌, 옵션 항목인 공지기간, 제목, 과목 매개변수는 유니온타입으로, 존재할 수 있고 존재하지 않을 수도 있게끔 처리할 수 있습니다.

이렇게 하면 하나의 메소드로 조건 분기를 사용해 데이터를 처리할 수 있습니다.

DB 테이블도 한 개 입니다.

테이블이 한 개이기에 한 테이블안에 모든 컬럼을 다 가져야합니다.

공통된 테이블 명을 게시글 테이블로 명명하겠습니다.

<img src="../ref/박주현 2025-01-02 회고록 이미지.png"/>

위와 같이 공통된 테이블로 데이터를 저장할 수 있습니다. 공지사항 1개, 숙제 2개는 게시글 테이블의 각각 하나의 레코드로서 저장됩니다.

옵션 항목인 게시글\_공지기간과 게시글\_과목은 nullable 로 제약조건을 설정하여 타입에 맞게 해당 컬럼이 null 처리될 수 있습니다.

### 예시

위와 같이 브라우저 소스코드 1개와 웹서버 소스코드 1개를 재활용하는 경우를 이카운트 기능에서 이틀 전 피들러 실습 때 본 적이 있습니다.

차후에 실습할 기초등록 - 외화코드 에서 빠른 검색과 조건 검색에서 똑같은 API 를 사용하고 똑같은 DTO를 활용하는 것을 보았습니다.

각 조회에 맞는 공통된 항목들이 있었고, 빠른 검색에는 param 필드와 SheeNM에 값이 담겨 전해졌고, 조건 검색에선 조건에 맞는 필드에 값이 담겨 전해졌습니다.(e.g. 외화코드에 1 검색 -> CODE_NO = 1) 해당 기능에 필요 없는 필드들은 모두 빈 값처리되어 Request Message로 보내졌습니다.

### 추가로 고려해볼만한 사항

현재 제한사항은 브라우저 소스도 1개, 웹서버 소스도 1개, 테이블도 1개입니다. 1개의 소스를 여러 기능에서 재활용하려 합니다.

<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-important">
  <p class="callout-title">❗ 첫 번째 사항</p>
  
브라우저에서 공통된 API를 사용하기 위해선 각각의 기능에 맞는 필드들을 모두 가져야 합니다. 각각의 기능이 매우 고도화된 기능이라면 필요로하는 필드들도 많을 것입니다. 그럼 공통된 DTO 는 무수히 많은 필드를 갖게 되고, 이것은 Request Message 양을 크게 만듭니다. 큰 Request Message의 크기는 인터넷 대역폭을 많이 잡아먹기 때문에 성능 문제로 이어질 가능성이 있습니다.

선택 항목이 null 이라면 해당 필드를 누락시킨 Request Message 를 보내는 방법을 생각해 볼 수 있습니다.

</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-important">
  <p class="callout-title">❗ 두 번째 사항</p>
  
하나의 소스코드로 기능을 처리하게 된다면, 객체지향 원칙(SOLID)에서 S(단일 책임 원칙)에 위배될 수 있습니다. 소스코드가 방대해지면 기능 명시적으로 이해하기 어려워지고, 여러 분기문을 통해 처리한다면 유지보수하는데에 더 많은 시간을 소요하게 됩니다.
</blockquote>
<br>
<blockquote data-ke-style="style1" class="markdown-callout markdown-callout-important">
  <p class="callout-title">❗ 세 번째 사항</p>
  
하나의 테이블에서 공지사항과 숙제 데이터를 처리하는 것은 정규화에 어긋납니다. 또 많은 컬럼에서 null 값이 들어갈 수 있고, 이는 좋은 설계는 아닙니다.

성능 측면 비용도 고려해야합니다. 추후에 데이터가 많아질 때를 예시로 들어보겠습니다. 무수히 많은 게시글 레코드가 쌓였습니다. 이때 공지사항에 대해 조회를 하려면 숙제와 공지사항이 모두 저장된 게시글 테이블에서 조회가 일어납니다. 공지사항만을 조회하고 싶은데 수 많은 전체 데이터에서 조회를 하게 되면, 이는 조회 성능 문제를 야기시킵니다.

게시글\_타입 필드에 인덱스를 적용해 위 문제를 개선할 순 있습니다. 하지만 인덱스 설정도 비용이기 때문에 여러 상황을 고려해야합니다.

</blockquote>

### 개선점

과제에 대한 방법론을 너무 러프하게 적고, 거시적 관점에서 적어서 부족한 부분을 느꼈습니다. 부문장님께서 교육해주신 내용을 바탕으로 공지 사항이든, 숙제든 밸리데이션을 해야할 부분이 있습니다. 이부분을 하나의 함수로 코드 재사용성을 높여 밸리데이션을 할 수 있었습니다.

UI 관점에서도 방법이 누락됐습니다. 백엔드 개발자라 API 호출만 신경썼는데, 화면 구성에 대해서도 기술해야했습니다.
방법적인 측면은 제가 해봤던 방식과 일치했습니다. 모든 항목을 다 같은 HTML 을 만들어 재활용하고, 각 서비스마다 숨겨야할 항목은 display-none 속성으로 바꿔주면 됐습니다.

부문장님께서 일종의 숙제를 하나 내주셨습니다. DB 테이블을 하나만 쓸 경우 회고록은 회고록 타입도 여러개이고, 제목도 여러개, 내용도 여러개를 가질 수 있습니다. 이럴 경우 컬럼을 제목1, 제목2로 계속 추가해서 구현할 것이냐? 라고 물으셨습니다. 그리고 이에 대한 해법을 물으셨습니다.

<img src="../ref/박주현 2025-01-02 회고록 이미지.png"/>

현재 DB 구조는 위와 같습니다. 이때 여러개의 제목과 여러개의 내용을 가진 회고록을 추가해야한다면 전 다음과 같이 할 것 같습니다.

제목1과 제목2를 JSON 형태로 만들어서 그 문자열을 제목 컬럼에 넣을 것 같습니다. 내용 컬럼또한 마찬가지입니다. 이런 구조를 갖는다면 한 컬럼에 대해 여러개 데이터를 가져도 한 레코드로서 다룰 수 있습니다.
만약 제목에 VARCHAR 길이에 대한 제약이 있다면 이 제약을 더 늘리거나 TEXT 형태로 바꿔야할 것입니다.

댓글과 대댓글 테이블 형태도 마찬가지입니다. 댓글 테이블에 대댓글 컬럼을 갖고, 대댓글 컬럼에 댓글에 대한 대댓글을 모두 JSON 형식으로 만들어 문자열을 넣을 수 있습니다. 이렇게 되면 대댓글을 모두 레코드로 다루지 않기 때문에 데이터 양이 적어집니다.

하지만 위의 방식은 단점이 있습니다. 바로 검색이 불가합니다. 검색을 하려면 해당 컬럼을 열어 모든 값들을 완전탐색해야할 것입니다. 따라서 기능에 대한 조건과 설계를 잘 따져봐야합니다. 댓글 검색이 없고, 데이터 row 수를 줄이고 싶다면 위 방법은 탁월할 것입니다. 하지만 댓글 검색이 되어야하고 대댓글 마다 하나의 row로서 관리되어야할 것 같다면 NoSQL 로 데이터 마이그레이션을 고려해볼 수 있습니다.(문서형 DB e.g.MongoDB)

---

# 4. 소프트 스킬면에서 성장한 점

마니또를 통해 동기들끼리 더욱 가까워진 것 같습니다. 오늘 밤 동기들끼리 회식도 하면 우애가 더 깊어질 것 같습니다.

---

# 5. 제안하고 싶은 내용

상수 부문장님께서 목소리도 너무 좋으시고, 교육 진행도 너무 좋으신데 뒷자리에 앉은 동기들이 잘 안들리는 경우가 있었습니다. 간단한 마이크가 있다면 뒷 자리 앉은 동기들도 원활히 들을 수 있을 것 같습니다.
