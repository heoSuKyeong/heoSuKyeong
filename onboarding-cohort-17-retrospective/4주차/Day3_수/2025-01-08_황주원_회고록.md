# Daily Retrospective  
**ì‘ì„±ì**: [í™©ì£¼ì›]  
**ì‘ì„±ì¼ì‹œ**: [2025-01-08]  

## 1. ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© (í•„ìˆ˜)  
### ë°ì´í„° ëª¨ë¸
ë°ì´í„°ì˜ ê´€ê³„, ì ‘ê·¼ê³¼ ê·¸ íë¦„ì— í•„ìš”í•œ ì²˜ë¦¬ ê³¼ì •ì— ê´€í•œ ì¶”ìƒí™”ëœ ëª¨í˜•

í”„ë¡œê·¸ë¨ì—ì„œ ë‹¤ë£° ë°ì´í„°ë¥¼ ì •ì˜í•˜ë©°, ë°ì´í„°ë¥¼ ë‹´ê³  ìˆëŠ” **DTO**ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

[ìƒì„±ë˜ëŠ” ë°©ë²•] <br />
data_model_template(single) build í•˜ë©´, data_model(single_list)ì„ ìƒì„±í•˜ê²Œ ëœë‹¤.

ğŸ¤” ê·¸ëŸ¼ tsì—ì„œ ts íŒŒì¼ì´ ìƒì„±ë˜ëŠ”ê±¸ê¹Œ?? 
- data_model íŒŒì¼ì„ ë³´ë©´ ``This file is generated by "data model template" and modifying it directly is not allowed.`` ì´ íŒŒì¼ì€ data model templateì— ì˜í•´ ìƒì„±ë˜ì—ˆê³  ë°”ë¡œ ìˆ˜ì •í•˜ëŠ” ê±´ ê¸ˆì§€ë˜ì–´ ìˆë‹¤ê³  ì‘ì„±ë˜ì–´ ìˆë‹¤. templateì— ì˜í•´ ìë™ ìƒì„±ëœë‹¤ê³  ì´í•´í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.

[target] <br />
data model template ì½”ë“œë¥¼ ì‚´í´ë³´ë©´ targets ë¶€ë¶„ì´ ìˆëŠ”ë° ì–´ë””ì—ì„œ ì‚¬ìš©ë ì§€ë¥¼ ëª…ì„¸í•´ ë†“ì€ ë¶€ë¶„ì´ë‹¤.

```typescript
{
    prop_id: 'record_seq_no',
    data_type: '$$sequence',
    refer_type: 'record_seq_no',
    is_mandatory: true,
    attributes: {
        Renderer: {
            display_state: false,
        },
    },
    targets: [EN_MENU_TYPE.List, EN_MENU_TYPE.Input, EN_MENU_TYPE.Upload, EN_MENU_TYPE.Trans],
},
```
#### data model vs definition
- definition 
    - ëª…ì„¸ > ë‚´ê°€ ì–´ë–¤ í•­ëª©ë“¤ì„ ì“¸ê±°ë‹¤.
- data_model
    - ê²¬ì  ì—…ë¬´ | ì¬ê³ ìƒë‹¨ | ì¬ê³  ì…ë ¥ ì— ì‚¬ìš©í•  ë°ì´í„°ë¥¼ **DTO**ë¡œ ì§€ì •í•´ì¤˜. (aka. ë°˜ì°¬í†µ)
    - ë°ì´í„° íƒ€ì…, prop ì„ ì •ì˜í•¨ 
    - ì´ëŸ¬í•œ DTO ì¤‘ ëª…ì„¸í•œ(definition) í•­ëª©ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

### data model definition vs data model
- data model 
    - DataModelIdentifier ë¡œ êµ¬í˜„ëœ ë¶€ë¶„
    - inventory_single_input ë¶€ë¶„ì—ì„œëŠ” inventory_single_input ë¡œ ì •ì˜ëœ ë¶€ë¶„ì„ data modelì´ë¼ê³  ë¶€ë¥¸ë‹¤.
        - ``export const inventory_single_input = new DataModelIdentifier('inv_s_input');``
    - ë‹¤ë¥¸ ë¶€ë¶„ì—ì„œ í˜¸ì¶œí•  ë•Œë„ data modelì¸ 'inventory_single_input'ì„ í˜¸ì¶œí•´(import) ì‚¬ìš©í•œë‹¤.
- data model definition
    - IDataModelDefinitionìœ¼ë¡œ êµ¬í˜„ëœ ë¶€ë¶„
    - inventory_single_input ë¶€ë¶„ì—ì„œëŠ” inventory_single_input_Definition ë¡œ ì •ì˜ëœ ë¶€ë¶„ì„ data model definitionì´ë¼ê³  ë¶€ë¥¸ë‹¤.
        ```typescript
        const inventory_single_input_Definition: IDataModelDefinition = {
            data_model_id: 'inv_s_input',
            props: [
                { prop_id: 'tenant_sid', data_type: '$$sid', refer_type: 'tenant_sid', refer_group: 'sid' },
                ...
            ]
        }
        ```

### prop_id vs refer_type
ğŸ¤” prop_idì™€ refer_typeì€ ê°™ì€ê±° ê°™ì€ë° ì™œ ë¶„ë¦¬í–ˆì„ê¹Œ?<br />
+ ì•„ë˜ ì½”ë“œì²˜ëŸ¼ refer_typeê³¼ prop_idëŠ” ê°™ì€ë° ì™œ refer_typeì—ì„œ ê°€ì ¸ì˜¬ê¹Œ ? <br />
``const prop_ids = this.descriptor.getPropIdsByReferType(refer_type, ...optional);`` 

ğŸ…°ï¸ ì§€ê¸ˆì€ ê°™ì€ ê°’ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ê±´ ë§ë‹¤. í•˜ì§€ë§Œ 5.0 ì´ìƒì˜ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” prop_idë¥¼ uniqueí•˜ì§€ë§Œ ì˜ë¯¸ ì—†ëŠ” ë‚œìˆ˜ì²˜ë¦¬ëœ ê°’ìœ¼ë¡œ ì €ì¥ë˜ì§€ ì•Šì„ê¹Œ? ì´ ë‘˜ì„ ë¶„ë¦¬í•˜ì§€ ì•Šì„ê¹Œ? í•˜ê³  ìˆë‹¤.

```typescript
{
    prop_id: 'file_des',
    data_type: '$$txt',
    refer_type: 'file_des', // ê°’ ë™ì¼
    targets: [EN_MENU_TYPE.List],
    attributes: {
        Renderer: {
            display_state: false,
        },
    },
},
```
### dmc, smc
- smc
    - slip, object_idë¥¼ control
    - dmcì˜ ì§‘í•©
- ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ì§€ë‹˜
```typescript
smc : 
	attribute:[]

	dmc: [
		quotationXmaster:
		data_model: [{}]
		attribute: []
	]
```

## 2. ë™ê¸°ì—ê²Œ ë„ì›€ ë°›ì€ ë‚´ìš© (í•„ìˆ˜)
- ì—¬ëŸ¬ ë™ê¸°ë“¤(ìŠ¹ì¤€ë‹˜, ë„í˜•ë‹˜, ì§€ì€ë‹˜, ë‹¤ì€ë‹˜, ì„±ë²”ì±…ì„ë‹˜, ì—°ì•„ë‹˜)ì„ í†µí•´ ì†Œì†Œí•œ ê¶ê¸ˆì¦ì— ëŒ€í•œ ë‹µì„ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤! 
- ì—°ì•„ë‹˜ì´ ê·¤ ë‚˜ëˆ”ì„ í•´ì£¼ì…”ì„œ ë“ ë“ í•œ ì˜¤í›„ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!  
- ë™ê¸°ëŠ” ì•„ë‹ˆì‹œì§€ë§Œ ë³¸ë¶€ì¥ë‹˜ê»˜ì„œ $ëŠ” ë³€ìˆ˜ì´ê³ , $$ëŠ” íƒ€ì…ì´ë¼ê³  ì•Œë ¤ì£¼ì…¨ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!

---

## 3. ê°œë°œ ê¸°ìˆ ì ìœ¼ë¡œ ì„±ì¥í•œ ì  (ì„ íƒ)

### 1. êµìœ¡ ê³¼ì • ìƒ ë°°ìš´ ë‚´ìš©ì´ ì•„ë‹Œ ê°œì¸ì  í˜¸ê¸°ì‹¬ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì¶”ê°€ ê³µë¶€í•œ ë‚´ìš©

### 1.1 Action -> Main Program ì²˜ë¦¬ ê³¼ì • 
Action -> Main í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì—ì„œ ``?.attributes?.find((x) => x.attr_id == definition_attrs.info.action_program_resolver)?.data[action_mode];`` í•´ë‹¹ ë¶€ë¶„ì˜ ì½”ë“œë¥¼ ì´í•´í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.

ì„±ì¤€íŒ€ì¥ë‹˜ê»˜ ì—¬ì­¤ë³¸ í›„ ì´í•´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. <br />
ì´í•´í•œ ê³¼ì •ìœ¼ë¡œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. CreateInventoryAction.ts
    - ActionProgramResolveProgram í”„ë¡œê·¸ë¨ ì‹¤í–‰
    ```ts
    const program = ProgramBuilder.create<
        IActionProgramResolveProgramRequestDto,
        IActionProgramResolveProgramResult
    >(IActionProgramResolveProgram, context);

    const result = program.execute(slip_dto);
    ```
2. ActionProgramResolveProgram.ts
    - input.tsì— ëª…ì„¸ë˜ì–´ ìˆëŠ” action_program_resolver data ê°’ì„ ì°¾ì€ í›„, í•´ë‹¹ í”„ë¡œê·¸ë¨(CreateInventoryProgram) ì‹¤í–‰ <br />
    -> definition ì„ ì´í•´í•˜ì§€ ëª»í•œ ìƒí™©ì—ì„œ input.tsë¥¼ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì„ ì´í•´í•˜ì§€ ëª»í–ˆì—ˆìŠµë‹ˆë‹¤.
    ```typescript
        const resolver = this.execution_context.bizz_mgr
			.getMenuDefinition(
				this.execution_context,
				this.execution_context.action.bizz_sid,
				this.execution_context.action.menu_sid || ''
			)
			?.attributes?.find((x) => x.attr_id == definition_attrs.info.action_program_resolver)?.data[action_mode];

		if (resolver) {
			const program = ProgramBuilder.create<ExecuteSetupMainRequestDto, ExecuteSetupMainResultDto>(
				resolver,
				this.execution_context
			);
			return program.execute({
				slip_data_model: slip_data_model,
				additional_info: additional_info,
				derive_info: derive_info,
				current_template: current_template,
			}) as unknown as ProgramResult;
		}
    ```
    2-1. input.ts
    - action_program_resolverë¥¼ ì°¾ì•„ê°€ê³ , createë¡œ ì •ì˜ëœ CreateInventoryProgramì„ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.
        ```typescript
        {
			prop_id: '',
			attr_id: definition_attrs.info.action_program_resolver,
			attr_type: EN_ATTR_TYPE.Information,
			data: {
				[EN_ACTION_MODE.Create]: 'ICreateInventoryProgram',
				[EN_ACTION_MODE.Modify]: 'IModifyInventoryProgram',
				[EN_ACTION_MODE.Delete]: 'IModifyStatusInventoryProgram' /* ì‚­ì œ */,
				[EN_ACTION_MODE.UnDelete]: 'IModifyStatusInventoryProgram' /* ì‚­ì œì·¨ì†Œ */,
				[EN_ACTION_MODE.Confirm]: 'IModifyConfirmInventoryProgram' /* í™•ì¸ */,
				[EN_ACTION_MODE.UnConfirm]: 'IModifyConfirmInventoryProgram' /* í™•ì¸ì·¨ì†Œ */,
			} as definition_attrs.info.action_program_resolver,
		},
        ```
3. CreateInventoryProgram.ts
    - ExecuteSetupMainProgramë¥¼ ì‹¤í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. 
    ```ts
    private _executeMainSetupProgram(request: ExecuteSetupMainRequestDto): ExecuteSetupMainResultDto {
		const program = ProgramBuilder.create<ExecuteSetupMainRequestDto, ExecuteSetupMainResultDto>(
			IExecuteSetupMainProgram,
			this.execution_context
		);

		// Main ë¡œì§ì—ì„œ SlipDataModelContainer ìƒì„± ì‹œ ì—ëŸ¬, ì„ì‹œ ë¡œì§
		// ë¹ˆ ê°ì²´ì¼ ê²½ìš° ìƒˆë¡œ ìƒì„±í•˜ì§€ ì•Šê³  ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì—¬ ì—ëŸ¬ ë°œìƒ
		// ===================================================
		request.derive_info.smc = new SlipDataModelContainer(this.execution_context, request.slip_data_model);
		// ===================================================

		return program.execute(request);
	}
    ```

ì•„ë˜ì™€ ê°™ì´ ë¡œì§ì´ ì²˜ë¦¬í•˜ê²Œ ë˜ì–´ ExecuteSetupMainProgramì´ ì‹¤í–‰ë©ë‹ˆë‹¤.


### 2. ì˜¤ëŠ˜ ì§ë©´í–ˆë˜ ë¬¸ì œ (ê°œë°œ í™˜ê²½, êµ¬í˜„)ì™€ í•´ê²° ë°©ë²•

ğŸ¤” definitionì— menu, object ê°€ ìˆëŠ”ë° ë‘˜ì˜ ì°¨ì´ê°€ ë­˜ê¹Œ ?

ğŸ…°ï¸ ì–´ë ´í’‹ì´ ì½”ë“œë¡œ ì´í•´í•œ í›„ í•´ë‹¹ ë‚´ìš©ì´ ë§ëŠ”ì§€ ë™ê¸°ë“¤ì—ê²Œ ë¬¼ì–´ë³´ë©° íŒŒì•…í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. 

ì¬ê³  I > ê²¬ì ì„œ íƒ­ì—ì„œ, <br />
ê²¬ì ì„œì…ë ¥ / ê²¬ì ì„œì¡°íšŒ / ê²¬ì ì„œí˜„í™© / ë¯¸ì£¼ë¬¸í˜„í™©ì„ 'menu'ë¼ê³  ë§í•œë‹¤.

ê²¬ì ì„œ ì…ë ¥ì„ í´ë¦­í•˜ë©´, <br />
ì¼ì, ë‹¹ë‹¹ì ë“±ë“±ì˜ ìƒë‹¨ / ê·œê²©, í’ˆëª©ì½”ë“œ ë“±ì˜ í•˜ë‹¨ì´ ì¡´ì¬í•œë‹¤. í•´ë‹¹ ë¶€ë¶„ë“¤ì„ object ë¼ê³  ë§í•œë‹¤.

### 3. ìœ„ ë‘ ì£¼ì œ ì¤‘ ë¯¸ì²˜ í•´ê²° ëª»í•œ ê³¼ì œ. ì•ìœ¼ë¡œ ê³µë¶€í•´ë³¼ ë‚´ìš©.
- descriptorëŠ” 'ì—…ë¬´ë³„ ëª…ì„¸ì— ëŒ€í•œ ì •ë³´ë¥¼ ê´€ë¦¬í•œë‹¤. master.ts  ë“± íŒŒì¼ë¡œ ëª…ì„¸í•œ ë‚´ìš©ì„ descriptorì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ê²ƒ' ì´ë¼ê³  ì˜¬ë ¤ì£¼ì‹  ê²ƒì„ í™•ì¸í–ˆëŠ”ë°, definitionê³¼ì˜ ì°¨ì´ë¥¼ ëª…í™•íˆ ì•Œì§€ ëª»í•´ í•´ë‹¹ ë‚´ìš©ì„ í™•ì¸í•´ ë³´ê³ ì í•©ë‹ˆë‹¤.

