# Daily Retrospective

**ì‘ì„±ì**: [ì„¤ë‹¤ì€]  
**ì‘ì„±ì¼ì‹œ**: [2025-01-15]

## 1. ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© (í•„ìˆ˜)

### ğŸ—’ï¸ [validator ì´í•´]<br>

_1. TempExecuteSetupMainProgram.ts (ì›ë˜ëŠ” ê·¸ëƒ¥ ExecutsSetupMainProgram.ts)_<br>
: Action ì—ëŒ€í•´ì„œ ìš°ì„ ìˆœìœ„ëŒ€ë¡œ ë¡œì§ì„ ì‹¤í–‰<br>

```ts
// 03.ecount.usecase\ecount.usecase.common\src\server\program\TempExecuteSetupMainProgram.ts

// data_model_validator ë¡œì§ì€ DataModelValidatorProgramê°€ ë“¤ì–´ê°.
const validator_result = data_model_validator_program.execute({
  data_model_container: dmc,
  menu_type,
});

if (!_.vIsEmpty(validator_result.exception)) {
  validator_error_list.push(...validator_result.exception.details);
}

if (!_.vIsEmpty(validator_error_list)) {
  Exception.throw(
    ExceptionBuilder.create<IDataModelValidationException>(IDataModelValidationException, {
      data_model_id: this.master_data_model_id,
      details: validator_error_list,
    })
  );
}
```

<br>
_2. DataModelValidatorProgram.ts_<br>
data_model_validtorì„ ëŒë¦¬ëŠ” ê³µí†µ í”„ë¡œê·¸ë¨<br>

```ts
// 03.ecount.usecase\ecount.usecase.common\src\server\program\data_model\DataModelValidatorProgram.ts
onExecute(dto: IDataModelValidatorRequestDto<IDataModelContainer>): IDataModelValidatorResultDto {

const svc = SvcCommandBuilder.create(DataModelValidatorSvc, this.execution_context);
const result = svc.execute(dto);

return result;
}
```

<br>
_3. DataModelValidatorSvc.ts_<br>

```ts
// 03.ecount.usecase\ecount.usecase.common\src\server\svc\data_model_validator\DataModelValidatorSvc.ts

const validate = this._getCacheObject({
  data_model_id: dmc.data_model_id,
  cache_key: `${bizz_type}_${descriptor?.data_type}_${attr.attr * id}*${descriptor.refer_type}_${data.menu_type}\_validator`,
  callback: () =>
    // í•„ìš”í•œ validatorë¥¼ ê°€ì ¸ì˜´ (generator_selectorë‘ ë¹„ìŠ·í•œ ì—­í•  ìˆ˜í–‰)
    validators.getValidator(descriptor.data_type || "", attr.attr_id, descriptor.refer_type, this.execution_context.action.menu_type, bizz_type),
});
// 4ë²ˆ ì‹¤í–‰ê²°ê³¼ë¡œ validateì— ë‚´ê°€ ìƒê°í•œ íŒŒì¼ (foreign_currency_txt_not_null_input)ì´ ì˜ ë“¤ì–´ì™”ëŠ”ì§€ í™•ì¸
if (!validate) {
  continue;
}
let target_data = [];
if (!Array.isArray(attr.data)) {
  target_data = [attr.data];
} else {
  target_data = attr.data;
}
let is_continue = true;
let error_message: undefined | string;
```

**_[validateì˜ ê°’ ìº¡ì²˜ë³¸]_**<br>
![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€1.png)<br>
<br>
_4. Validator.ts_<br>

```ts
// 02.ecount.infrastructure\ecount.infra.attribute\src\server\provider\validator.ts

export function getValidator(
  data_type: data_types,
  attr_id: string,
  refer_type?: string,
  menu_type?: string,
  bizz_type?: string
): IValidator | undefined {
  data_type = data_type?.replace(/\$\$/, "");

  return (validators[`${bizz_type}_${data_type}_${attr_id}_${refer_type}` as keyof typeof validators] ||
    validators[`${bizz_type}_${data_type}_${attr_id}_${menu_type}` as keyof typeof validators] ||
    validators[`${bizz_type}_${data_type}_${attr_id}` as keyof typeof validators] ||
    validators[`${data_type}_${attr_id}_${refer_type}` as keyof typeof validators] ||
    validators[`${data_type}_${attr_id}_${menu_type}` as keyof typeof validators] ||
    validators[`${data_type}_${attr_id}` as keyof typeof validators] ||
    validators[`default_${attr_id}` as keyof typeof validators] ||
    validators[attr_id as keyof typeof validators]) as IValidator | undefined;
}
```

4ë²ˆì—ì„œ validatorsë¥¼ ëŒ ë•Œ, ì•„ë¬´ëŸ° ì‘ì—…ì„ í•˜ì§€ ì•Šì•˜ìœ¼ë©´ ìš°ì„ ìˆœìœ„ë¥¼ íƒ€ì„œ txt_not_nullíŒŒì¼ì´ validatorë¡œ ìˆ˜í–‰ëœë‹¤.<br>
ë§Œì•½ foreign_currencyì˜ txt data_typeì˜ not nullì„ ê²€ì‚¬í•´ì•¼í•˜ëŠ” ë¡œì§ì´ ë‹¤ë¥´ë‹¤ê³  í•˜ë©´ ì•„ë˜ ê²½ë¡œì— validatorë¥¼ ë§Œë“¤ì–´ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì¶”ê°€ ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.<br>
ê²½ë¡œ : 02.ecount.infrastructure\ecount.infra.attribute\src\@shared_infra_attribute\validator\not_null\foreign_currency_txt_not_null_input.ts<br>
ë¬¼ë¡  index.tsì— ê²½ë¡œë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ë„ í•„ìˆ˜ì ìœ¼ë¡œ ì§„í–‰í•´ì¤˜ì•¼í•œë‹¤!!!<br>

### ğŸ—’ï¸ [CreateForeignCurrencyAction êµ¬í˜„]<br>

**_[í•„ìš”í•œ íŒŒì¼ ìƒì„±]_**

_1. input.ts_<br>>
attr_id : api > action_mode : createì˜ ì£¼ì„ í•´ì œ

```ts
// 03.ecount.usecase\ecount.usecase.tutorials\src\server\@abstraction\definition\foreign_currency\menus\input.ts
```

_2. dtoìƒì„±_<br>

```ts
// 03.ecount.usecase\ecount.usecase.tutorials\src\@shared_usecase_tutorials\@abstraction\dto\$idf.ForeignCurrencyRequestDto.ts
import { ISlipDataModel, NotificationRequestDto } from "ecount.usecase.base/@abstraction";

export const ForeignCurrencyRequestDto = new $InterfaceIdentifier("ForeignCurrencyRequestDto");

export interface ForeignCurrencyRequestDto {
  slip_data_model: ISlipDataModel;
  additional_info?: {
    [additional_info_id: string]: any;
  };
  notification?: NotificationRequestDto;
  current_template?: number;
  is_za_from_only?: boolean;
}
```

_3. ICreateForeignCurrencyAction ìƒì„±_<br>

```ts
// 03.ecount.usecase\ecount.usecase.tutorials\src\@shared_usecase_tutorials\@abstraction\action\ICreateForeignCurrencyAction.ts

import { ActionDataBase, ActionIdentifier, IActionImpl } from "ecount.infra.base/abstraction";
import { ApiResultDto } from "ecount.usecase.base/@abstraction";
import { ForeignCurrencyRequestDto } from "../dto";

export const ICreateForeignCurrencyAction = new ActionIdentifier(
  "ICreateForeignCurrencyAction",
  "/api/app.ForeignCurrency/action/CreateForeignCurrencyAction"
);

export interface ICreateForeignCurrencyAction extends IActionImpl<ActionDataBase<ForeignCurrencyRequestDto>, ApiResultDto> {}
```

_4. CreateForeignCurrencyAction êµ¬í˜„ì²´ ìƒì„±_<br>

```ts
//04.ecount.application\VeloxApps\app.tutorials\src\server\action\CreateForeignCurrencyAction.ts

import { ApiActionBase } from 'ecount.application.common/action';
import { IExecutionContext } from 'ecount.infra.bridge/base';
import { ProgramBuilder } from 'ecount.infra.common/program';

import { AuthorityDataDto, definition_attrs } from 'ecount.usecase.base/@abstraction';
import { ActionDataBase, IConfigurationContext } from 'ecount.infra.base/abstraction';
import { EN_ACTION_MODE, EN_AUTHORITY_TYPE, EN_MENU_TYPE } from 'ecount.fundamental.define/enum';

import { BizzVersionCheckFeature, SlipDataModelContainer } from 'ecount.usecase.common/@implement';
import {
DeriveBizzInfoTargetDto,
ExecuteSetupMainRequestDto,
ExecuteSetupMainResultDto,
IActionProgramResolveProgram,
IActionProgramResolveProgramRequestDto,
IActionProgramResolveProgramResult,
IValueResolverConfigureFeature,
IVersionCheckFeature,
} from 'ecount.usecase.common/@abstraction';
import { manager } from 'ecount.infra.bridge/feature';
import { InventoryExecuteMainValueResolverConfigureFeature } from 'ecount.usecase.inventory/@implement';
import { ForeignCurrencyRequestDto, ICreateForeignCurrencyAction } from 'ecount.usecase.tutorials/@abstraction';
import { Authority } from './action_util/Authority';

@\_authorize({ authority_type: EN_AUTHORITY_TYPE.Insert } as AuthorityDataDto, Authority.getForeignCurrencyAuthority)
export default class CreateInventoryAction
extends ApiActionBase<ActionDataBase<ForeignCurrencyRequestDto>, ExecuteSetupMainResultDto>
implements ICreateForeignCurrencyAction
{
protected onConfigure(configuration_context: IConfigurationContext, execution_context: IExecutionContext): void {
configuration_context.setFeature<IVersionCheckFeature>(
IVersionCheckFeature,
new BizzVersionCheckFeature(execution_context)
);

    	configuration_context.setFeature<IValueResolverConfigureFeature>(
    		IValueResolverConfigureFeature,
    		new InventoryExecuteMainValueResolverConfigureFeature(execution_context)
    	);
    }

    executeSync(
    	context: IExecutionContext,
    	request: ActionDataBase<ForeignCurrencyRequestDto>
    ): ExecuteSetupMainResultDto {
    	const { action_mode, menu_type } = request;
    	// menu_typeì„ ë‚´ë ¤ì£¼ì§€ ëª»í•´ í•˜ë“œì½”ë”©
    	// ===================================================
    	// context.action.menu_type = EN_MENU_TYPE.Input;
    	// ===================================================
    	const bizz_manager = context.getFeature<manager.IBizzManager>(manager.IBizzManager);

    	const bizz_definition = bizz_manager.getBizzDefinition(context, context.action.bizz_sid);
    	const derive_target = bizz_definition?.attributes?.find((attr) =>
    		_.vIsEquals(attr.attr_id, definition_attrs.info.derive_use_info)
    	)?.data?.list as DeriveBizzInfoTargetDto[];

    	const slip_dto = {
    		bizz_sid: context.action.action_mode,
    		action_mode: EN_ACTION_MODE.Create,
    		menu_type: EN_MENU_TYPE.Input, // menu_type,
    		slip_data_model: request.data.slip_data_model,
    		derive_info: {
    			smc: {} as SlipDataModelContainer,
    			derive_target: derive_target,
    		},
    		current_template: request.data.current_template,
    		is_za_from_only: request.data.is_za_from_only,
    		additional_info: request.data.additional_info,
    		notification: request.data.notification,
    	} as IActionProgramResolveProgramRequestDto;

    	const program = ProgramBuilder.create<
    		IActionProgramResolveProgramRequestDto,
    		IActionProgramResolveProgramResult
    	>(IActionProgramResolveProgram, context);

    	const result = program.execute(slip_dto);

    	return result;
    }

}
```

**_[ì†ŒìŠ¤ì½”ë“œ ì‹¤í–‰]_**

_0. ë¡œì»¬ > ê²¬ì ì„œì…ë ¥ì— ì €ì¥ë²„íŠ¼ í´ë¦­í•˜ë©´ fiddlerì— CreateInventoryActionì´ ìˆëŠ”ë° ì´ê±° composerë¡œ ìˆ˜ì •í•´ì„œ ì‹¤í–‰(execute)í•´ë³´ê¸°_<br>
![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€4.png)<br>
![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€5.png)<br>

_1. CreateForeignCurrencyAction.ts_<br>

```ts
  // 04.ecount.application\VeloxApps\app.tutorials\src\server\action\CreateForeignCurrencyAction.ts
  executeSync(
  ...
  const slip_dto = {
  bizz_sid: context.action.action_mode,
  action_mode: EN_ACTION_MODE.Create,
  menu_type: EN_MENU_TYPE.Input,
  slip_data_model: request.data.slip_data_model,
  derive_info: {
  smc: {} as SlipDataModelContainer,
  derive_target: derive_target,
  },
  current_template: request.data.current_template,
  is_za_from_only: request.data.is_za_from_only,
  additional_info: request.data.additional_info,
  notification: request.data.notification,
  } as IActionProgramResolveProgramRequestDto;

        const program = ProgramBuilder.create<
          IActionProgramResolveProgramRequestDto,
          IActionProgramResolveProgramResult
        >(IActionProgramResolveProgram, context);

        const result = program.execute(slip_dto);

        return result;
  )
```

_2. ActionProgramResolveProgram.ts_<br>

```ts
// 03.ecount.usecase\ecount.usecase.common\src\server\program\slip\ActionProgramResolveProgram.ts
rotected onExecute(dto: ProgramDto): ProgramResult {
const { slip*data_model, additional_info, derive_info, current_template, is_za_from_only } = dto;
const action_mode = *.vSafe(dto.action_mode, this.execution_context.action.action_mode);

    const resolver = this.execution_context.bizz_mgr
      .getMenuDefinition(
        this.execution_context,
        this.execution_context.action.bizz_sid,
        this.execution_context.action.menu_sid || ''
      )
      // attr_idê°€ definition_attrs.info.action_program_resolverì¸ê²ƒì— action_modeê°€ 'NEW'ì¸ ê²ƒì„ ì°¾ì•„ì•¼í•¨.
      // ê·¼ë° foreign_currencyì˜ inputì—ëŠ” attr_idê°€ apiì¸ ê²ƒë§Œ ìˆê³  action_program_resolverì¸ ê²ƒì´ ì—†ìŒ -> í•´ë‹¹ ë¶€ë¶„ì„ ì¶”ê°€ í›„ ë¹Œë“œ í•„ìš”í•¨. (ì•„ë˜ì´ë¯¸ì§€ ì°¸ì¡°)
      ?.attributes?.find((x) => x.attr_id == definition_attrs.info.action_program_resolver)?.data[action_mode];

    // ë¹Œë“œ í›„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ foreign_currencyì˜ inputì— ì¼ì¹˜í•˜ëŠ” ê°’ì´ ìˆìœ¼ë‹ˆ ê·¸ì— í•´ë‹¹í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì°¾ì•„ì¤„ ê²ƒ (CreateForeignCurrencyProgram)
    // ê·¸ ì´í›„ë¶€í„°ì˜ ë™ì‘ì€ ìš°ë¦¬ê°€ ì´ì „ì— êµ¬í˜„í–ˆë˜ íë¦„ëŒ€ë¡œ ë™ì‘í•˜ë©° DBì— ê°’ì´ ì €ì¥ë¨
    if (resolver) {
      const program = ProgramBuilder.create<ExecuteSetupMainRequestDto, ExecuteSetupMainResultDto>(
        resolver,
        this.execution_context
      );
      return program.execute({
        slip_data_model: slip_data_model,
        additional_info: additional_info,
        derive_info: derive_info,
        current_template: current_template,
        is_from_za_only: is_za_from_only,
      }) as unknown as ProgramResult;
    }

    return {} as unknown as ProgramResult;
  }
```

![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€6.png)<br>

## 2. ë™ê¸°ì—ê²Œ ë„ì›€ ë°›ì€ ë‚´ìš© (í•„ìˆ˜)

**ë¯¼ì¤€ë‹˜**<br>
ì–´ì œì— ì´ì–´ ì˜¤ëŠ˜ì€ validatorì— ëŒ€í•œ íë¦„ì„ ì „ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì…¨ìŠµë‹ˆë‹¤.<br>
ì–´ë””ì—ì„œ ì–´ë””ë¥¼ í˜¸ì¶œí•˜ê³  ì´ëŸ°ê²ƒë“¤ì„ ë””ë²„ê¹…ì„ í†µí•´ ì„¸ì‹¬í•˜ê²Œ ì•Œë ¤ì£¼ì…”ì„œ ì˜ ì´í•´ê°€ ê°‘ë‹ˆë‹¤.<br>
ì´ë ‡ê²Œí•˜ë©´ í˜¼ì ìŠ¤ìŠ¤ë¡œ ë””ë²„ê¹…í• ë•Œë„ ì´ëŸ° ë¶€ë¶„ì´ ìˆì—ˆì§€í•˜ê³  ì°¸ê³ í•˜ê²Œë˜ì–´ í•™ìŠµì— ë§ì€ ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.<br>

## 3. ê°œë°œ ê¸°ìˆ ì ìœ¼ë¡œ ì„±ì¥í•œ ì  (ì„ íƒ)

### 1. êµìœ¡ ê³¼ì • ìƒ ë°°ìš´ ë‚´ìš©ì´ ì•„ë‹Œ ê°œì¸ì  í˜¸ê¸°ì‹¬ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì¶”ê°€ ê³µë¶€í•œ ë‚´ìš©

### 2. ì˜¤ëŠ˜ ì§ë©´í–ˆë˜ ë¬¸ì œ (ê°œë°œ í™˜ê²½, êµ¬í˜„)ì™€ í•´ê²° ë°©ë²•

**_1. ê²¬ì ì„œì…ë ¥ ì €ì¥ ì‹œ pathê´€ë ¨ ì—ëŸ¬ê°€ ëœ¨ëŠ”ë° ì–´ë”˜ì§€ ì œëŒ€ë¡œ ëª»ì°¾ëŠ” ë¬¸ì œ_**<br>

![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€3.png)

ì´ì „ì— ë„í˜•ë‹˜ì´ë‘ ë””ë²„ê¹…í•˜ë©´ì„œ TempExecuteë‘ Executeë‘ í—·ê°ˆë¦¬ë‹ˆê¹Œ Executeê°€ ì•ˆë¨¹íˆë„ë¡ ì£¼ì„ì²˜ë¦¬í•œ ì ì´ ìˆë‹¤.<br>
í•´ë‹¹ ìœ„ì¹˜ì— ìˆëŠ” indexì— ê°€ì„œ í•œë²ˆ ë´¤ì„ ë•Œ ë¶„ëª…íˆ ì£¼ì„ í•´ì œë˜ì–´ìˆì—ˆëŠ”ë°....ë‹¤ì‹œ ë³´ë‹ˆê¹Œ ì—¬ì „íˆ ì£¼ì„ ìƒíƒœì˜€ë‹¤.<br>
í•´ì œí•˜ê³  ë¹Œë“œí•œ ì´í›„ì—ëŠ” ë””ë²„ê¹…ì´ ì˜ ì¡í˜”ë‹¤.<br><br>

**_2. CreateForeignActionì„ ë””ë²„ê¹…í•˜ë ¤ê·¸ë¬ëŠ”ë° í”¼ë“¤ëŸ¬ì—ì„œ 500ì´ë‚˜ 502 gateway ì˜¤ë¥˜ ë°œìƒ_**<br>

![alt text](../ref/ì„¤ë‹¤ì€_ì´ë¯¸ì§€/2025-01-15_ì„¤ë‹¤ì€_íšŒê³ ë¡_ì´ë¯¸ì§€2.png)

í”¼ë“¤ëŸ¬ ì„¤ì¹˜ ì‹œ ìœ„ í”„ë¡œí† ì½œì„ ë¶„ëª… ë³€ê²½í–ˆì—ˆëŠ”ë°, ë‹¤ì‹œ ë³´ë‹ˆê¹Œ ì•ˆë°”ë€Œì–´ìˆì—ˆë˜ ê²ƒì´ë‹¤.<br>
`<client>;ssl3;tls1.0;tls1.1;tls1.2`<br>
ì´ê±¸ë¡œ ë°”ê¾¼ í›„ ì‹¤í–‰í–ˆë”ë‹ˆ ë””ë²„ê¹…ì´ ì˜ ë¨¹í˜”ë‹¤.<br>

## 4. ì†Œí”„íŠ¸ ìŠ¤í‚¬ë©´ì—ì„œ ì„±ì¥í•œ ì  (ì„ íƒ)

ë””ë²„ê¹…ì„ í•  ë•Œ ì¸ë‚´ì‹¬ì„ ê°€ì§€ëŠ” ìŠ¤í‚¬ì´ ëŠ˜ì—ˆìŠµë‹ˆë‹¤.
(ê°‘ìê¸° ë””ë²„ê¹…ì´ êº¼ì§ˆë•Œë„ ë‹¹í™©í•˜ì§€ ì•Šê³  ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í•˜ëŠ” ìŠ¤í‚¬ ë“±)

ê·¸ë¦¬ê³  ì†ŒìŠ¤ë¥¼ ë¶„ì„í•  ë•Œ ë” ì ê·¹ì ìœ¼ë¡œ íƒ€ê³ íƒ€ê³  ë“¤ì–´ê°€ëŠ” ê²½ë¡œë¥¼ í™•ì¸í•˜ë ¤ê³  ë…¸ë ¥í•˜ëŠ” ëŠë‚Œì´ ë“¤ì—ˆìŠµë‹ˆë‹¤!

## 5. ì œì•ˆí•˜ê³  ì‹¶ì€ ë‚´ìš©

êµìœ¡ì¥ ì»´í“¨í„°ë„ MS Officeê°€ ì„¤ì¹˜ë˜ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.<br>
ì—‘ì…€ì´ë‚˜ í”¼í”¼í‹° ì‚¬ìš©ì„ í•˜ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë° libreëŠ” ìµìˆ™ì¹˜ ì•Šë‹¤ë³´ë‹ˆ ê·¸ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ìˆ™ì§€í•˜ëŠ”ë° ì‹œê°„ì´ ê±¸ë¦½ë‹ˆë‹¤.<br>
ê·¸ë¦¬ê³  ì—‘ì…€ì—ì„œëŠ” ì‚¬ìš©ê°€ëŠ¥í•œ ë‹¨ì¶•í‚¤ ê°™ì€ê²Œ ë™ì‘ ì•ˆí•  ë•Œê°€ ìˆì–´ ë¶ˆí¸í•©ë‹ˆë‹¤...
