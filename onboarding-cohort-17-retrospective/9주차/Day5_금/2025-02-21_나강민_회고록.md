# Daily Retrospective

**ì‘ì„±ì**: [ë‚˜ê°•ë¯¼]  
**ì‘ì„±ì¼ì‹œ**: [2025-02-21]

## 1. ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© (í•„ìˆ˜)

## **ğŸ“Œ ì½”ë“œ ë¶„ì„ (`SubscribeUserUserAction`)**
í•´ë‹¹ ì½”ë“œëŠ” **ì‚¬ìš©ìì˜ `user` ì†ì„±ì´ ë³€ê²½ë  ë•Œ**, ì„œë²„ì—ì„œ í•´ë‹¹ ì‚¬ìš©ìì˜ ë¶€ì„œ ì •ë³´ë¥¼ ì¡°íšŒí•˜ê³  **`dept` ì†ì„±ì„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê¸°ëŠ¥**ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

## **ğŸ“œ ì½”ë“œ ë¡œì§ ë¶„ì„**
| **ë‹¨ê³„** | **ì„¤ëª…** |
|----------|---------|
| **1ï¸âƒ£ ì‹¤í–‰ ì¡°ê±´** | `DataModel_Trigger`ë¡œ ì„¤ì •ëœ `user` ì†ì„±ì´ ë³€ê²½ë  ë•Œ ì‹¤í–‰ë¨ (`initial_sync: false`) |
| **2ï¸âƒ£ ì‚¬ìš©ì ê²€ìƒ‰** | `user` ì†ì„±ì˜ ê°’ì„ `search_keyword`ë¡œ ì„¤ì •í•˜ì—¬ ì„œë²„ API í˜¸ì¶œ (`IGetUserInfoSearchAction`) |
| **3ï¸âƒ£ ë¶€ì„œ ì •ë³´ ì¡°íšŒ** | ì„œë²„ ì‘ë‹µ (`result`)ì—ì„œ í•´ë‹¹ ì‚¬ìš©ìì˜ `dept_sid`, `dept_nm` ê°€ì ¸ì˜¤ê¸° |
| **4ï¸âƒ£ `dept` ì†ì„± ì—…ë°ì´íŠ¸** | `dmc?.setValueByReferType('dept', { ... })`ë¥¼ í†µí•´ `dept` ì†ì„±ì„ ìë™ ë³€ê²½ |

---

## **ğŸ“Œ ì½”ë“œ ìƒì„¸ ë¶„ì„**
### **1ï¸âƒ£ `executeAsync` ì‹¤í–‰**
```typescript
@action_impl(ISubscribeUserUserAction)
export class SubscribeUserUserAction {
	static executeAsync: ISubscribeUserUserAction = async (request) => {
		const { execution_context, owner: { dmc } } = request;
```
- **ì´ í´ë˜ìŠ¤(`SubscribeUserUserAction`)ëŠ” íŠ¹ì • ì†ì„±ì´ ë³€ê²½ë  ë•Œ ìë™ ì‹¤í–‰ë˜ëŠ” ì•¡ì…˜**
- `executeAsync`ëŠ” **ë¹„ë™ê¸° í•¨ìˆ˜**ì´ë©°, `request` ê°ì²´ë¥¼ í†µí•´ **í˜„ì¬ ë°ì´í„° ëª¨ë¸ ì»¨í…ìŠ¤íŠ¸(`dmc`)** ë° ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(`execution_context`)ë¥¼ ê°€ì ¸ì˜´

---

### **2ï¸âƒ£ `user` ì†ì„± ê°’(`search_keyword`) ê°€ì ¸ì˜¤ê¸°**
```typescript
const search_keyword = (dmc?.getValueByReferType('user') as $$code).code;
```
- **í˜„ì¬ ë°ì´í„° ëª¨ë¸(`dmc`)ì—ì„œ `user` ì†ì„± ê°’(`code`)ì„ ê°€ì ¸ì˜´**
- `user` ì†ì„± ê°’ì´ **ì‚¬ìš©ì ID ë˜ëŠ” ì½”ë“œ**ë¼ê³  ê°€ì •

---

### **3ï¸âƒ£ ì„œë²„ API í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ**
```typescript
const http_client = execution_context.getFeature<system.IHttpRequestFeature>(system.IHttpRequestFeature);
const { result } = await http_client.sendAsync<any, IGetUserInfoSearchActionResponse[]>(
	IGetUserInfoSearchAction,
	{
		data: {
			keyword: search_keyword, // ê²€ìƒ‰í•  ì‚¬ìš©ì ID
			user_type: EN_AUTH_TARGET_TYPE.Deliver, // ì‚¬ìš©ì ìœ í˜•
		},
		autoPageProgress: false,
	}
);
```
- `http_client.sendAsync(...)`ë¥¼ í†µí•´ ì„œë²„ì— ì‚¬ìš©ì ì •ë³´ë¥¼ ìš”ì²­ (`IGetUserInfoSearchAction`)
- **ì‚¬ìš©ì ìœ í˜•(`user_type`)ì„ `Deliver`ë¡œ ì§€ì •í•˜ì—¬ íŠ¹ì • ì—­í• ì„ ê°€ì§„ ì‚¬ìš©ìë§Œ ê²€ìƒ‰**
- ê²°ê³¼(`result`)ëŠ” `IGetUserInfoSearchActionResponse[]` í˜•íƒœë¡œ ë°˜í™˜ë¨ (ë°°ì—´)

---

### **4ï¸âƒ£ ì‚¬ìš©ì ì •ë³´ í•„í„°ë§**
```typescript
const target_id_additional_data = result.find((id) => id.sid === search_keyword);
```
- **API ì‘ë‹µ(`result`)ì—ì„œ í˜„ì¬ `search_keyword`ì™€ ì¼ì¹˜í•˜ëŠ” ì‚¬ìš©ì ì •ë³´ ì°¾ê¸°**
- `sid`ê°€ `search_keyword`ì™€ ê°™ì€ ë°ì´í„°ë¥¼ ì°¾ìŒ

---

### **5ï¸âƒ£ `dept` ì†ì„± ì—…ë°ì´íŠ¸**
```typescript
if (target_id_additional_data) {
	dmc?.setValueByReferType('dept', {
		sid: target_id_additional_data.dept_sid,  // ë¶€ì„œ ID ì„¤ì •
		code: target_id_additional_data.dept_sid, // ë¶€ì„œ ì½”ë“œ ì„¤ì •
		name: target_id_additional_data.dept_nm,  // ë¶€ì„œëª… ì„¤ì •
	});
}
```
- **ì°¾ì€ ì‚¬ìš©ì(`target_id_additional_data`)ì˜ `dept_sid`, `dept_nm` ê°’ì„ ì´ìš©í•˜ì—¬ `dept` ì†ì„± ìë™ ì—…ë°ì´íŠ¸**
- `dmc?.setValueByReferType('dept', {...})`ë¥¼ í†µí•´ **í˜„ì¬ ë°ì´í„° ëª¨ë¸ì—ì„œ `dept` ì†ì„±ì„ ê°±ì‹ **  

---

## **ğŸ“Œ `time_manage_user_subscribe_data_model`ì™€ì˜ ê´€ê³„**
```typescript
export const time_manage_user_subscribe_data_model: IReferTypeAttrGenerator<
	datamodel_trigger_attrs.subscribe_data_model
> = (execution_context, setup, target) => {
	return {
		prop_id: target.prop.prop_id,
		attr_id: datamodel_trigger_attrs.subscribe_data_model,
		attr_type: EN_ATTR_TYPE.DataModel_Trigger,
		data: [{ identifier: 'ISubscribeUserUserAction', initial_sync: false }],
	};
};
```
1. `user` ì†ì„±ì„ ê°€ì§„ `prop`ì´ ë³€í™”í•  ë•Œë§ˆë‹¤ `ISubscribeUserUserAction`ì„ ì‹¤í–‰í•¨  
2. `initial_sync: false` ì´ë¯€ë¡œ **ìµœì´ˆ ë¡œë”© ì‹œì—ëŠ” ì‹¤í–‰ë˜ì§€ ì•Šê³ **, **ì‚¬ìš©ìê°€ `user` ê°’ì„ ë³€ê²½í•  ë•Œë§ˆë‹¤ ì‹¤í–‰**ë¨  
3. ë³€ê²½ëœ `user` ê°’ìœ¼ë¡œ ì„œë²„ API í˜¸ì¶œí•˜ì—¬ ë¶€ì„œ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì„œ `dept` ì†ì„±ì„ ì—…ë°ì´íŠ¸  

---

## **ğŸ“Œ ì½”ë“œ ë¡œì§ ìš”ì•½**
| **ë‹¨ê³„** | **ë™ì‘ ë‚´ìš©** |
|----------|--------------|
| **1ï¸âƒ£ `user` ì†ì„± ë³€ê²½ ê°ì§€** | `DataModel_Trigger`ê°€ ì„¤ì •ëœ `user` ì†ì„±ì´ ë³€ê²½ë  ë•Œ ì‹¤í–‰ |
| **2ï¸âƒ£ ì‚¬ìš©ì ID ì¶”ì¶œ** | `dmc.getValueByReferType('user')`ë¥¼ í†µí•´ `search_keyword` ê°€ì ¸ì˜´ |
| **3ï¸âƒ£ API í˜¸ì¶œ** | `IGetUserInfoSearchAction`ì„ í†µí•´ ì‚¬ìš©ì ì •ë³´ ê²€ìƒ‰ |
| **4ï¸âƒ£ ì‚¬ìš©ì ë°ì´í„° í•„í„°ë§** | `result.find(...)`ë¡œ í•´ë‹¹ ì‚¬ìš©ì ì •ë³´ ì°¾ê¸° |
| **5ï¸âƒ£ `dept` ì†ì„± ì—…ë°ì´íŠ¸** | `dmc.setValueByReferType('dept', {...})`ë¡œ ë¶€ì„œ ì •ë³´ ë°˜ì˜ |

---

## **ğŸ“Œ ê²°ë¡ **
âœ… **`time_manage_user_subscribe_data_model`ì€ `user` ì†ì„±ì´ ë³€ê²½ë  ë•Œ `ISubscribeUserUserAction`ì„ ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •**  
âœ… **`SubscribeUserUserAction`ì€ `user` ì†ì„±ì´ ë³€ê²½ë˜ë©´ ì„œë²„ì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì™€ `dept` ì†ì„±ì„ ìë™ ì—…ë°ì´íŠ¸**  
âœ… **ì´ êµ¬ì¡°ë¥¼ í†µí•´ `user` ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ `dept` ê°’ì´ ë™ì ìœ¼ë¡œ ë³€ê²½ë¨ (ë°ì´í„° ëª¨ë¸ ìë™ ë™ê¸°í™”)** ğŸš€

## 2. ë™ê¸°ì—ê²Œ ë„ì›€ ë°›ì€ ë‚´ìš© (í•„ìˆ˜)



---

## 3. ê°œë°œ ê¸°ìˆ ì ìœ¼ë¡œ ì„±ì¥í•œ ì  (ì„ íƒ)

ì•„ë˜ì˜ 3ê°€ì§€ ì£¼ì œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤.

### 1. êµìœ¡ ê³¼ì • ìƒ ë°°ìš´ ë‚´ìš©ì´ ì•„ë‹Œ ê°œì¸ì  í˜¸ê¸°ì‹¬ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì¶”ê°€ ê³µë¶€í•œ ë‚´ìš©

### 2. ì˜¤ëŠ˜ ì§ë©´í–ˆë˜ ë¬¸ì œ (ê°œë°œ í™˜ê²½, êµ¬í˜„)ì™€ í•´ê²° ë°©ë²•

setup apiê°€ ì´ ë‘ë²ˆ
1. list_search
2. list

ì´ë ‡ê²Œ ë‘ë²ˆì´ í˜¸ì¶œë˜ì–´ì•¼ í•˜ëŠ”ë° í•´ê²°ë°©ë²•ì€ life_cyecle ì†ì„±ê°’ì„ menu_attrì— ë„£ì–´ì£¼ë©´ ëìŠµë‹ˆë‹¤.

### 3. ìœ„ ë‘ ì£¼ì œ ì¤‘ ë¯¸ì²˜ í•´ê²° ëª»í•œ ê³¼ì œ. ì•ìœ¼ë¡œ ê³µë¶€í•´ë³¼ ë‚´ìš©.

ì§„í–‰ìƒíƒœì— ë§ì¶°ì„œ ì „í™˜ë²„íŠ¼ì˜ ê°’ì´ ì–´ë–»ê²Œ ë‚˜ì˜¬ì§€ì™€ ê³µí†µ ë¡œì§ë“¤ì„ ì •ë¦¬í•˜ëŠ” ê³¼ì •ì„ í•´ê²°í•´ì•¼í•©ë‹ˆë‹¤.
ë˜í•œ select apiê°€ datamodelì˜ ê°’ì„ ë°”ê¿”ì¹˜ê¸°í•˜ì—¬ í˜„ì¬ ë‚˜ì˜¤ì§€ ì•ŠëŠ” ë¬¸ì œë„ í•´ê²°í•´ì•¼í•©ë‹ˆë‹¤.

---


