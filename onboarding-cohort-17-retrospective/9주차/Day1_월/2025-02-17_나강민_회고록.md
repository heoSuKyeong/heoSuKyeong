# Daily Retrospective

**ì‘ì„±ì**: [ë‚˜ê°•ë¯¼]  
**ì‘ì„±ì¼ì‹œ**: [2025-02-17]

## 1. ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© (í•„ìˆ˜)

## **ì„œì¹˜ í”„ë¡œê·¸ë¨(User Action ê¸°ë°˜) êµ¬í˜„ ë° `search_options` ì˜¤ë¥˜ ë¶„ì„**

### **1. ê°œìš”**
ì´ë²ˆ ë¶„ì„ì—ì„œëŠ” **ì„œì¹˜ í”„ë¡œê·¸ë¨ì„ User Actionì„ í†µí•´ êµ¬í˜„í•˜ëŠ” ë°©ë²•**ê³¼ **`search_options` ì˜¤ë¥˜**ì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤. íŠ¹íˆ, `ILastSearchOptionRuntime`ì´ `page_runtime`ì— ìƒì„±ë˜ì§€ ì•Šì•„ `search_options`ê°€ ì„¤ì •ë˜ì§€ ì•ŠëŠ” ë¬¸ì œë¥¼ ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë£¹ë‹ˆë‹¤.

---

## **2. ì„œì¹˜ í”„ë¡œê·¸ë¨ User Action êµ¬í˜„**
ì„œì¹˜ í”„ë¡œê·¸ë¨(Search Program)ì€ **ë°ì´í„° ì¡°íšŒ ë° ê²€ìƒ‰ì„ ì¼ë°˜í™”í•˜ì—¬ ì²˜ë¦¬í•˜ëŠ” ì—”ì§„**ì…ë‹ˆë‹¤. ê°œë°œìëŠ” ì„œì¹˜ í”„ë¡œê·¸ë¨ì„ êµ¬í˜„í•  ë•Œ, **User Action**ì„ í†µí•´ ê²€ìƒ‰ì„ ì‹¤í–‰í•˜ê³ , Featureë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ê²€ìƒ‰ ì˜µì…˜ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### **2.1. User Action êµ¬í˜„ (`SelectBasicListUserAction`)**
```ts
@action_impl(ISelectListUserAction)
export class SelectBasicListUserAction {
	static executeAsync: ISelectListUserAction = async (request) => {
		// 1. ê²€ìƒ‰ íƒ€ì… ì¶”ì¶œ
		const search_data_model_type = request.vmc.getPageState<page_state.ISearchPageState>('search')?.search_type;

		// 2. ì„œì¹˜ í”„ë¡œê·¸ë¨ ìƒì„± ë° Feature ì„¤ì •
		const search_program = await ProgramBuilder.createAsync<ISearchDataModelGenerateProgramRequest, void>(
			ISearchDataModelGenerateProgram,
			request.execution_context,
			(context) => {
				context.setFeature(
					IBuildProcessFeature,
					new BasicListSearchBuildProcessFeature(request.execution_context, {
						search_type: request.payload.search_type,
						is_summary: search_data_model_type == EN_LIST_SEARCH_TYPE.Summary ? true : false,
					})
				);
			}
		);
	};
}
```

#### **ì„¤ëª…**
- `@action_impl(ISelectListUserAction)`: `ISelectListUserAction`ì„ êµ¬í˜„í•˜ëŠ” User Action.
- **ê²€ìƒ‰ íƒ€ì… ì¶”ì¶œ**: `search_data_model_type`ì„ ê°€ì ¸ì™€ **ì¼ë°˜ ê²€ìƒ‰ì¸ì§€ ì§‘ê³„í‘œ ê²€ìƒ‰ì¸ì§€** íŒë‹¨.
- **`ProgramBuilder.createAsync` ì‹¤í–‰**:
  - ì„œì¹˜ í”„ë¡œê·¸ë¨(`ISearchDataModelGenerateProgram`)ì„ ìƒì„±.
  - **Feature ì„¤ì •**(`BasicListSearchBuildProcessFeature`):
    - ê²€ìƒ‰ ìœ í˜•(`search_type`)ê³¼ **ì§‘ê³„ ê²€ìƒ‰ ì—¬ë¶€(`is_summary`)** ì„¤ì •.

---

### **2.2. ì„œì¹˜ í”„ë¡œê·¸ë¨ Feature êµ¬í˜„ (`BasicListSearchBuildProcessFeature`)**
```ts
export class BasicListSearchBuildProcessFeature implements IBuildProcessFeature {
	feature_id: string = IBuildProcessFeature.feature_id;
	context: IExecutionContext;
	search_type: ISearchEventType;
	is_summary: boolean;

	constructor(
		execution_context: IExecutionContext,
		search_param: { search_type: ISearchEventType; is_summary: boolean }
	) {
		this.context = execution_context;
		this.search_type = search_param.search_type;
		this.is_summary = search_param.is_summary;
	}

	// 1. ê²€ìƒ‰ ì˜µì…˜ ìƒì„± (SearchOptionProcess)
	buildSearchOptionProcess(): SearchOptionProcess {
		return [
			BasicListGetDefaultSearchOptionResolver,
			getSetupResolver(this.is_summary),
			getDataModelIdResolver(this.is_summary),
			...modifySearchOptionResolver(this.is_summary, this.search_type),
		];
	}

	// 2. ê²€ìƒ‰ ì „ ë°ì´í„° ì¤€ë¹„ (PrepareProcess)
	buildPrepareProcess(): PrepareProcess {
		return getPrepareProcessResolvers(this.search_type);
	}

	// 3. ë°ì´í„° ì¡°íšŒ ë¡œì§ (SearchProcess)
	buildSearchProcess(): SearchProcess {
		return [this.is_summary ? BasicListSummarySearchDataModelResolver : BasicListSearchDataModelResolver];
	}

	// 4. ê²€ìƒ‰ í›„ ë°ì´í„° ê°€ê³µ (PostProcess)
	buildPostProcess(): PostProcess {
		return [
			BasicListProcessBizzAndDataModelResolver,
			BasicListUpdateVMCStateAfterSearchResolver,
			BasicListUpdateDataModelResolver,
			AlertMaxLimitCountResolver,
		];
	}
}
```

#### **ì„¤ëª…**
- **ê²€ìƒ‰ ì˜µì…˜(`buildSearchOptionProcess`)**:
  - ê¸°ë³¸ ê²€ìƒ‰ ì˜µì…˜ ì„¤ì •(`BasicListGetDefaultSearchOptionResolver`).
  - `getDataModelIdResolver()`, `modifySearchOptionResolver()` ë“±ì„ í™œìš©í•˜ì—¬ ê²€ìƒ‰ ë°ì´í„° ëª¨ë¸ ì„¤ì •.
- **ì „ì²˜ë¦¬(`buildPrepareProcess`)**:
  - ê²€ìƒ‰ ì „ í•„ìˆ˜ ë°ì´í„° ê°€ê³µ.
- **ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤(`buildSearchProcess`)**:
  - `is_summary` ê°’ì— ë”°ë¼ ì¼ë°˜ ê²€ìƒ‰ ë˜ëŠ” ì§‘ê³„ ê²€ìƒ‰ ì‹¤í–‰.
- **í›„ì²˜ë¦¬(`buildPostProcess`)**:
  - `BasicListUpdateDataModelResolver` ë“±ì„ í†µí•´ ê²°ê³¼ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸.

---

## **3. `search_options` ì˜¤ë¥˜ ë¶„ì„**

### **3.1. ê²€ìƒ‰ ì˜µì…˜ ì²˜ë¦¬ ë¡œì§ (`BasicListGetDefaultSearchOptionResolver`)**
```ts
export class BasicListGetDefaultSearchOptionResolver
	implements SearchOptionResolver<ISearchDataModelGenerateProgramRequest, BasicListSearchOptionProcessResultDto> {
	execution_context: IExecutionContext;
	constructor(execution_context: IExecutionContext) {
		this.execution_context = execution_context;
	}

	async OnExecuteAsync(dto: ISearchDataModelGenerateProgramRequest): Promise<BasicListSearchOptionProcessResultDto> {
		const { vmc, dm_manager } = dto;

		const attribute_feature = this.execution_context.getFeature<attribute.IAttributeFeature>(
			attribute.IAttributeFeature
		);

		const { search_dmc, template_dmc } = getDMC(this.execution_context, vmc, dm_manager);
		const aggregate_type = EN_AGGREGATE_TYPE.Details;

		// ê²€ìƒ‰ ì˜µì…˜ ê°€ì ¸ì˜¤ê¸°
		const search_options = vmc.getPageRuntimeWritable<ILastSearchOptionRuntime>(ILastSearchOptionRuntime);

		return {
			...dto,
			search_options,
			search_dmc,
			template_dmc,
		};
	}
}
```

#### **ì˜¤ë¥˜ ì›ì¸**
- **`search_options`ê°€ `vmc.getPageRuntimeWritable<ILastSearchOptionRuntime>`ì—ì„œ ìƒì„±ë˜ì§€ ì•ŠìŒ.**
- ì¦‰, `ILastSearchOptionRuntime`ì´ `page_runtime`ì—ì„œ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ìƒíƒœ.

---

### **3.2. `ILastSearchOptionRuntime`ì„ ì´ˆê¸°í™”í•˜ëŠ” ë¡œì§ (`page_size_resolver`)**
```ts
export const page_size_resolver: IMenuResolver<menu_attrs.page_size> = async ({
	execution_context,
	page_state,
	page_viewmodel,
	page_runtime,
	setup,
	attribute,
}): Promise<void> => {
	// search_options ì´ˆê¸°í™” (ì´ˆê¸°ê°’ì´ ì—†ì„ ê²½ìš° ìƒì„±)
	if (!page_runtime[ILastSearchOptionRuntime]) {
		page_runtime[ILastSearchOptionRuntime] = {};
	}

	// limit ê°’ ì„¤ì •
	if (!page_runtime[ILastSearchOptionRuntime].limit) {
		page_runtime[ILastSearchOptionRuntime] = {
			...page_runtime[ILastSearchOptionRuntime],
			limit: attribute.limit_count,
		};
	}

	// page ì •ë³´ ì„¤ì •
	if (!page_runtime[ILastSearchOptionRuntime].page) {
		page_runtime[ILastSearchOptionRuntime] = {
			...page_runtime[ILastSearchOptionRuntime],
			page: {
				current_index: 1,
				row_count: 0,
			},
		};
	}

	// ì „ì²´ ì¹´ìš´íŠ¸ ì •ë³´ ì„¤ì •
	if (!page_state?.[PageState.ISearchTotalCount]) {
		page_state[PageState.ISearchTotalCount] = { total_count: 0 };
	}
};
```

#### **ì˜¤ë¥˜ í•´ê²° ë°©ë²•**
1. **`page_size_resolver`ê°€ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸**.
   - `page_runtime[ILastSearchOptionRuntime]`ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ ì²´í¬.
2. **`menu_attrs`ì—ì„œ `ILastSearchOptionRuntime`ì´ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸**.
3. **`ILastSearchOptionRuntime`ì´ Search Program ì‹¤í–‰ ì „ ì´ˆê¸°í™”ë˜ë„ë¡ ë³´ì¥**.

---

## **4. ê²°ë¡  ë° ì •ë¦¬**
### **âœ… ì„œì¹˜ í”„ë¡œê·¸ë¨(User Action) êµ¬í˜„ ê³¼ì •**
1. `User Action`(`SelectBasicListUserAction`)ì—ì„œ ê²€ìƒ‰ì„ ì‹¤í–‰.
2. `BasicListSearchBuildProcessFeature`ì—ì„œ ê²€ìƒ‰ ì˜µì…˜ ë° ì „ì²˜ë¦¬, í›„ì²˜ë¦¬ ë¡œì§ ì„¤ì •.
3. `BasicListGetDefaultSearchOptionResolver`ì—ì„œ `search_options` ê°€ì ¸ì˜´.

### **âŒ `search_options` ì˜¤ë¥˜ ì›ì¸**
- `ILastSearchOptionRuntime`ì´ `page_runtime`ì— ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ.

### **ğŸ› ï¸ í•´ê²° ë°©ë²•**
- `page_size_resolver`ê°€ ì‹¤í–‰ë˜ë„ë¡ í™•ì¸.
- `ILastSearchOptionRuntime`ì´ `page_runtime`ì—ì„œ ì´ˆê¸°í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸
- í˜„ì¬ëŠ” setup ì½”ë“œì— menu attributeì˜ í•˜ë“œì½”ë”©.





## 2. ë™ê¸°ì—ê²Œ ë„ì›€ ë°›ì€ ë‚´ìš© (í•„ìˆ˜)

ê±´í˜¸ë‹˜ : ì˜¤ëŠ˜ ê°œë°œì™¸ì ìœ¼ë¡œ ì—¬ëŸ¬ë°©ë©´ì—ì„œ ì¼€ì–´í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

ì£¼ì›ë‹˜ : ë§›ìˆëŠ” ê³¼ìë¥¼ ê¸°êº¼ì´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ì™• ë§›ìˆì—ˆì–´ìš”

ìˆ˜ê²½ë‹˜ : ë°ì´í„°ì˜ íë¦„ì„ íŒŒì•…í•˜ê³  ìˆëŠ” ë„ì¤‘ì— ë„ì›€ì„ ì£¼ì…¨ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!

ì„±ì¬ë‹˜ : ì œê°€ ëª¨ë¥´ëŠ” ì„œë²„ ë¡œì§ì— ê´€í•˜ì—¬ ì•Œë ¤ì£¼ì…¨ìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.

ë¯¼ì¤€ë‹˜ : ì§„ì§œ ë¯¼ì¤€ë‹˜ ì•„ë‹ˆì˜€ìœ¼ë©´ ì €ëŠ” ì˜¤ëŠ˜ ì§‘ì— ëª»ê°”ì„ê±°ì—ìš”.. ê°ì‚¬í•©ë‹ˆë‹¤. page_size_resolveê°€ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì— ì •ë§ ë†€ëìŠµë‹ˆë‹¤.

ìŠ¹ì¤€ë‹˜ : í”„ë¡œì íŠ¸ ì§„í–‰ì‚¬í•­ì„ íŒŒì•…í•˜ê³  ì•Œë ¤ì£¼ì…”ì„œ ê°ì‚¬í–ˆìŠµë‹ˆë‹¤.

ì£¼í˜„ë‹˜ : í•­ìƒ ì±™ê²¨ì£¼ì‹œê³  ë„ì™€ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

í˜„ì² ë‹˜ : ëª¨ë¥´ëŠ” ê²Œ ìˆë‹¤ë©´ í˜„ì² ë‹˜ì—ê²Œ ê°‘ë‹ˆë‹¤. ì™œëƒë©´ ëª¨ë“ ê²Œ í•´ê²°ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì •ë§ ê°ì‚¬í•©ë‹ˆë‹¤ ì˜¤ëŠ˜ë„ ê¸°ëŠ¥ì ìœ¼ë¡œ, ê°œë°œì ìœ¼ë¡œ ëª¨ë¥´ëŠ”ê²Œ ìˆë‹¤ë©´ ë‹¤ í•´ê²°í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

---

## 3. ê°œë°œ ê¸°ìˆ ì ìœ¼ë¡œ ì„±ì¥í•œ ì  (ì„ íƒ)

### 3. ìœ„ ë‘ ì£¼ì œ ì¤‘ ë¯¸ì²˜ í•´ê²° ëª»í•œ ê³¼ì œ. ì•ìœ¼ë¡œ ê³µë¶€í•´ë³¼ ë‚´ìš©.

ìœ„ ì£¼ì œëŠ” ê°ê° í•˜ë‚˜ì˜ ì„ íƒí•­ëª©ìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.
(ìœ„ ì£¼ì œì—ì„œ 2ê°œ ì‘ì„±í•˜ë©´ 2ê°œ ì„ íƒí•­ëª© ì‘ì„±í•œ ì…ˆ)
![alt text](../ref/ë‚˜ê°•ë¯¼_ì´ë¯¸ì§€/image.png)

í•´ë‹¹ ë¶€ë¶„ì—ì„œ sortì™€ ê´€ë ¨ëœ ì†ì„±ê°’ì„ í™•ì¸í•˜ë©´ì„œ ì°¾ì•„ì•¼ í•  ë“¯í•©ë‹ˆë‹¤. 
page_size_resolveë¥¼ ì¡°ê¸ˆ ë” ì•Œì•„ë³´ë©´ì„œ sortëŠ” ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ì•Œì•„ë´ì•¼í•  ê±° ê°™ìŠµë‹ˆë‹¤.
---

## 4. ì†Œí”„íŠ¸ ìŠ¤í‚¬ë©´ì—ì„œ ì„±ì¥í•œ ì  (ì„ íƒ)
## **ì†Œí”„íŠ¸ ìŠ¤í‚¬ ì„±ì¥ ì •ë¦¬**  

ìµœê·¼ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ **ê°ìì˜ ì—­í• ê³¼ ì „ë¬¸ì„±ì´ ëšœë ·í•´ì§€ë©´ì„œ ë™ë£Œ ê°„ ì†Œí†µì´ ë”ìš± í™œë°œí•´ì¡Œë‹¤**ëŠ” ì ì´ í° ë³€í™”ì˜€ìŠµë‹ˆë‹¤.  
1. **íŒ€ ë‚´ ì§€ì‹ ê³µìœ  í™œì„±í™”**  
   - íŠ¹ì • ë¶€ë¶„ì„ ì˜ ì•Œê³  ìˆëŠ” ë™ë£Œë¥¼ íŒŒì•…í•˜ê³ , í•„ìš”í•œ ì •ë³´ë¥¼ ì£¼ê³ ë°›ìœ¼ë©° í˜‘ì—…ì´ ê°•í™”ë¨.  
   - ì„œë¡œê°€ ê°€ì§„ ì§€ì‹ì„ ê³µìœ í•˜ë©° **íŒ€ ì „ì²´ì˜ ì—­ëŸ‰ì„ í–¥ìƒ**ì‹œí‚´.  

2. **ë¬¸ì œ í•´ê²° ê³¼ì •ì˜ ì¦ê±°ì›€ ë°œê²¬**  
   - ê°ìì˜ ê°•ì ì„ í™œìš©í•˜ì—¬ í•˜ë‚˜ì”© ë¬¸ì œë¥¼ í•´ê²°í•´ë‚˜ê°€ëŠ” ê³¼ì •ì—ì„œ **í˜‘ì—…ì˜ ì¬ë¯¸**ë¥¼ ëŠë‚Œ.  
   - ì–´ë ¤ìš´ ë¬¸ì œë¥¼ í•¨ê»˜ í•´ê²°í•˜ë©´ì„œ **ìì—°ìŠ¤ëŸ½ê²Œ ë” ë„“ì€ ì‹œì•¼ë¥¼ ê°€ì§€ê²Œ ë¨**.  

3. **ë„“ì€ ì‹œì•¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ í–¥ìƒ**  
   - ê¸°ìˆ ì ì¸ ë¶€ë¶„ë¿ë§Œ ì•„ë‹ˆë¼ **ì „ë°˜ì ì¸ í”„ë¡œì íŠ¸ íë¦„ì„ ì´í•´í•˜ê³  í•´ê²°ì±…ì„ ê³ ë¯¼**í•˜ëŠ” ìŠµê´€ì´ ìƒê¹€.  
   - ë‹¨ìˆœíˆ ì£¼ì–´ì§„ ì—…ë¬´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ **íŒ€ê³¼ í•¨ê»˜ ì„±ì¥í•˜ëŠ” ë°©ì‹**ìœ¼ë¡œ ì‚¬ê³ ê°€ í™•ì¥ë¨.  


---

